# Log format that captures all required fields for observability
# $upstream_http_x_app_pool and $upstream_http_x_release_id capture headers from the app
log_format combined_obs '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      'pool=$upstream_http_x_app_pool release=$upstream_http_x_release_id '
                      'up_status=$upstream_status up_addr=$upstream_addr '
                      'req_time=$request_time up_resp_time=$upstream_response_time';

# Set the access log file path inside the container
access_log /var/log/nginx/access.log combined_obs;
